{"remainingRequest":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\src\\views\\home\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\src\\views\\home\\home.vue","mtime":1624975306147},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIb21lU3dpcGVyIGZyb20gJy4vY2hpbGRDb21wcy9Ib21lU3dpcGVyJwppbXBvcnQgUmVjb21tZW5kVmlldyBmcm9tICcuL2NoaWxkQ29tcHMvUmVjb21tZW5kVmlldycKaW1wb3J0IEZlYXR1cmVWaWV3IGZyb20gJy4vY2hpbGRDb21wcy9GZWF0dXJlVmlldycKCmltcG9ydCBOYXZCYXIgZnJvbSAnY29tcG9uZW50cy9jb21tb24vbmF2YmFyL05hdkJhcicKaW1wb3J0IFRhYkNvbnRyb2wgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L3RhYkNvbnRyb2wvVGFiQ29udHJvbCcKaW1wb3J0IEdvb2RMaXN0IGZyb20gJ2NvbXBvbmVudHMvY29udGVudC9nb29kcy9Hb29kc0xpc3QnCmltcG9ydCBTY3JvbGwgZnJvbSAnY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL1Njcm9sbCcKaW1wb3J0IEJhY2tUb3AgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L2JhY2tUb3AvQmFja1RvcCcKCmltcG9ydCB7IGdldEhvbWVNdWx0aWRhdGEsIGdldEhvbWVHb29kcyB9IGZyb20gIm5ldHdvcmsvaG9tZSIKaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSAiY29tbW9uL3V0aWxzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgY29tcG9uZW50czogewogICAgSG9tZVN3aXBlciwKICAgIFJlY29tbWVuZFZpZXcsCiAgICBGZWF0dXJlVmlldywKICAgIE5hdkJhciwKICAgIFRhYkNvbnRyb2wsCiAgICBHb29kTGlzdCwKICAgIFNjcm9sbCwKICAgIEJhY2tUb3AKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYW5uZXJzOiBbXSwKICAgICAgcmVjb21tZW5kczogW10sCiAgICAgIGdvb2RzOiB7CiAgICAgICAgJ3BvcCc6IHtwYWdlOiAwLCBsaXN0OiBbXX0sCiAgICAgICAgJ25ldyc6IHtwYWdlOiAwLCBsaXN0OiBbXX0sCiAgICAgICAgJ3NlbGwnOiB7cGFnZTogMCwgbGlzdDogW119LAogICAgICB9LAogICAgICBjdXJyZW50VHlwZTogJ3BvcCcsCiAgICAgIGlzU2hvd0JhY2tUb3A6IGZhbHNlLAogICAgICB0YWJPZmZzZXRUb3A6IDAsCiAgICAgIGlzVGFiRml4ZWQ6IGZhbHNlLAogICAgICBzYXZlWTogMAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dHb29kcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZ29vZHNbdGhpcy5jdXJyZW50VHlwZV0ubGlzdAogICAgfQogIH0sCiAgZGVzdHJveWVkKCkgewogICAgY29uc29sZS5sb2coJ2hvbWUgZGVzdHJveWVkJyk7CiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLCB0aGlzLnNhdmVZLCAwKQogICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpCiAgfSwKICBkZWFjdGl2YXRlZCgpIHsKICAgIHRoaXMuc2F2ZVkgPSB0aGlzLiRyZWZzLnNjcm9sbC5nZXRTY3JvbGxZKCkKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyAxLuivt+axguWkmuS4quaVsOaNrgogICAgdGhpcy5nZXRIb21lTXVsdGlkYXRhKCkKCiAgICAvLyAyLuivt+axguWVhuWTgeaVsOaNrgogICAgdGhpcy5nZXRIb21lR29vZHMoJ3BvcCcpCiAgICB0aGlzLmdldEhvbWVHb29kcygnbmV3JykKICAgIHRoaXMuZ2V0SG9tZUdvb2RzKCdzZWxsJykKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyAxLuWbvueJh+WKoOi9veWujOaIkOeahOS6i+S7tuebkeWQrAogICAgY29uc3QgcmVmcmVzaCA9IGRlYm91bmNlKHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2gsIDUwKQogICAgdGhpcy4kYnVzLiRvbignaXRlbUltYWdlTG9hZCcsICgpID0+IHsKICAgICAgcmVmcmVzaCgpCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDkuovku7bnm5HlkKznm7jlhbPnmoTmlrnms5UKICAgICAqLwogICAgdGFiQ2xpY2soaW5kZXgpIHsKICAgICAgc3dpdGNoIChpbmRleCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAncG9wJwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ25ldycKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICdzZWxsJwogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgICB0aGlzLiRyZWZzLnRhYkNvbnRyb2wxLmN1cnJlbnRJbmRleCA9IGluZGV4OwogICAgICB0aGlzLiRyZWZzLnRhYkNvbnRyb2wyLmN1cnJlbnRJbmRleCA9IGluZGV4OwogICAgfSwKICAgIGJhY2tDbGljaygpIHsKICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgMCkKICAgIH0sCiAgICBjb250ZW50U2Nyb2xsKHBvc2l0aW9uKSB7CiAgICAgIC8vIDEu5Yik5patQmFja1RvcOaYr+WQpuaYvuekugogICAgICB0aGlzLmlzU2hvd0JhY2tUb3AgPSAoLXBvc2l0aW9uLnkpID4gMTAwMAoKICAgICAgLy8gMi7lhrPlrpp0YWJDb250cm9s5piv5ZCm5ZC46aG2KHBvc2l0aW9uOiBmaXhlZCkKICAgICAgdGhpcy5pc1RhYkZpeGVkID0gKC1wb3NpdGlvbi55KSA+IHRoaXMudGFiT2Zmc2V0VG9wCiAgICB9LAogICAgbG9hZE1vcmUoKSB7CiAgICAgIHRoaXMuZ2V0SG9tZUdvb2RzKHRoaXMuY3VycmVudFR5cGUpCiAgICB9LAogICAgc3dpcGVySW1hZ2VMb2FkKCkgewogICAgICB0aGlzLnRhYk9mZnNldFRvcCA9IHRoaXMuJHJlZnMudGFiQ29udHJvbDIuJGVsLm9mZnNldFRvcDsKICAgIH0sCiAgICAvKioKICAgICAqIOe9kee7nOivt+axguebuOWFs+eahOaWueazlQogICAgICovCiAgICBnZXRIb21lTXVsdGlkYXRhKCkgewogICAgICBnZXRIb21lTXVsdGlkYXRhKCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuYmFubmVycyA9IHJlcy5kYXRhLmJhbm5lci5saXN0OwogICAgICAgIHRoaXMucmVjb21tZW5kcyA9IHJlcy5kYXRhLnJlY29tbWVuZC5saXN0OwogICAgICB9KQogICAgfSwKICAgIGdldEhvbWVHb29kcyh0eXBlKSB7CiAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmdvb2RzW3R5cGVdLnBhZ2UgKyAxCiAgICAgIGdldEhvbWVHb29kcyh0eXBlLCBwYWdlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5nb29kc1t0eXBlXS5saXN0LnB1c2goLi4ucmVzLmRhdGEubGlzdCkKICAgICAgICB0aGlzLmdvb2RzW3R5cGVdLnBhZ2UgKz0gMQoKICAgICAgICAvLyDlrozmiJDkuIrmi4nliqDovb3mm7TlpJoKICAgICAgICB0aGlzLiRyZWZzLnNjcm9sbC5maW5pc2hQdWxsVXAoKQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n  <div id=\"home\" class=\"wrapper\">\r\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\r\n    <tab-control :titles=\"['流行', '新款', '精选']\"\r\n                 @tabClick=\"tabClick\"\r\n                 ref=\"tabControl1\"\r\n                 class=\"tab-control\" v-show=\"isTabFixed\"/>\r\n    <scroll class=\"content\"\r\n            ref=\"scroll\"\r\n            :probe-type=\"3\"\r\n            @scroll=\"contentScroll\"\r\n            :pull-up-load=\"true\"\r\n            @pullingUp=\"loadMore\">\r\n      <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"/>\r\n      <recommend-view :recommends=\"recommends\"/>\r\n      <feature-view/>\r\n      <tab-control :titles=\"['流行', '新款', '精选']\"\r\n                   @tabClick=\"tabClick\"\r\n                   ref=\"tabControl2\"/>\r\n      <good-list :goods=\"showGoods\"/>\r\n    </scroll>\r\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import HomeSwiper from './childComps/HomeSwiper'\r\n  import RecommendView from './childComps/RecommendView'\r\n  import FeatureView from './childComps/FeatureView'\r\n\r\n  import NavBar from 'components/common/navbar/NavBar'\r\n  import TabControl from 'components/content/tabControl/TabControl'\r\n  import GoodList from 'components/content/goods/GoodsList'\r\n  import Scroll from 'components/common/scroll/Scroll'\r\n  import BackTop from 'components/content/backTop/BackTop'\r\n\r\n  import { getHomeMultidata, getHomeGoods } from \"network/home\"\r\n  import {debounce} from \"common/utils\";\r\n\r\n  export default {\r\n    name: \"Home\",\r\n    components: {\r\n      HomeSwiper,\r\n      RecommendView,\r\n      FeatureView,\r\n      NavBar,\r\n      TabControl,\r\n      GoodList,\r\n      Scroll,\r\n      BackTop\r\n    },\r\n    data() {\r\n      return {\r\n        banners: [],\r\n        recommends: [],\r\n        goods: {\r\n          'pop': {page: 0, list: []},\r\n          'new': {page: 0, list: []},\r\n          'sell': {page: 0, list: []},\r\n        },\r\n        currentType: 'pop',\r\n        isShowBackTop: false,\r\n        tabOffsetTop: 0,\r\n        isTabFixed: false,\r\n        saveY: 0\r\n      }\r\n    },\r\n    computed: {\r\n      showGoods() {\r\n        return this.goods[this.currentType].list\r\n      }\r\n    },\r\n    destroyed() {\r\n      console.log('home destroyed');\r\n    },\r\n    activated() {\r\n      this.$refs.scroll.scrollTo(0, this.saveY, 0)\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    deactivated() {\r\n      this.saveY = this.$refs.scroll.getScrollY()\r\n    },\r\n    created() {\r\n      // 1.请求多个数据\r\n      this.getHomeMultidata()\r\n\r\n      // 2.请求商品数据\r\n      this.getHomeGoods('pop')\r\n      this.getHomeGoods('new')\r\n      this.getHomeGoods('sell')\r\n    },\r\n    mounted() {\r\n      // 1.图片加载完成的事件监听\r\n      const refresh = debounce(this.$refs.scroll.refresh, 50)\r\n      this.$bus.$on('itemImageLoad', () => {\r\n        refresh()\r\n      })\r\n    },\r\n    methods: {\r\n      /**\r\n       * 事件监听相关的方法\r\n       */\r\n      tabClick(index) {\r\n        switch (index) {\r\n          case 0:\r\n            this.currentType = 'pop'\r\n            break\r\n          case 1:\r\n            this.currentType = 'new'\r\n            break\r\n          case 2:\r\n            this.currentType = 'sell'\r\n            break\r\n        }\r\n        this.$refs.tabControl1.currentIndex = index;\r\n        this.$refs.tabControl2.currentIndex = index;\r\n      },\r\n      backClick() {\r\n        this.$refs.scroll.scrollTo(0, 0)\r\n      },\r\n      contentScroll(position) {\r\n        // 1.判断BackTop是否显示\r\n        this.isShowBackTop = (-position.y) > 1000\r\n\r\n        // 2.决定tabControl是否吸顶(position: fixed)\r\n        this.isTabFixed = (-position.y) > this.tabOffsetTop\r\n      },\r\n      loadMore() {\r\n        this.getHomeGoods(this.currentType)\r\n      },\r\n      swiperImageLoad() {\r\n        this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\r\n      },\r\n      /**\r\n       * 网络请求相关的方法\r\n       */\r\n      getHomeMultidata() {\r\n        getHomeMultidata().then(res => {\r\n          this.banners = res.data.banner.list;\r\n          this.recommends = res.data.recommend.list;\r\n        })\r\n      },\r\n      getHomeGoods(type) {\r\n        const page = this.goods[type].page + 1\r\n        getHomeGoods(type, page).then(res => {\r\n          this.goods[type].list.push(...res.data.list)\r\n          this.goods[type].page += 1\r\n\r\n          // 完成上拉加载更多\r\n          this.$refs.scroll.finishPullUp()\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #home {\r\n    /*padding-top: 44px;*/\r\n    height: 100vh;\r\n    position: relative;\r\n  }\r\n\r\n  .home-nav {\r\n    background-color: var(--color-tint);\r\n    color: #fff;\r\n\r\n    /*在使用浏览器原生滚动时, 为了让导航不跟随一起滚动*/\r\n    /*position: fixed;*/\r\n    /*left: 0;*/\r\n    /*right: 0;*/\r\n    /*top: 0;*/\r\n    /*z-index: 9;*/\r\n  }\r\n\r\n  .content {\r\n    overflow: hidden;\r\n\r\n    position: absolute;\r\n    top: 44px;\r\n    bottom: 49px;\r\n    left: 0;\r\n    right: 0;\r\n  }\r\n\r\n  .tab-control {\r\n    position: relative;\r\n    z-index: 9;\r\n  }\r\n\r\n  /*.content {*/\r\n    /*height: calc(100% - 93px);*/\r\n    /*overflow: hidden;*/\r\n    /*margin-top: 44px;*/\r\n  /*}*/\r\n</style>\r\n"]}]}