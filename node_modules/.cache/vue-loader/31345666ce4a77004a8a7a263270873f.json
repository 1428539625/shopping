{"remainingRequest":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\src\\views\\detail\\Detail.vue","mtime":1625066802006},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\工作\\vue\\luyou\\luyouv2\\mytabbar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRGV0YWlsTmF2QmFyIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxOYXZCYXIiOw0KaW1wb3J0IERldGFpbFN3aXBlciBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsU3dpcGVyIjsNCmltcG9ydCBEZXRhaWxCYXNlSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsQmFzZUluZm8iOw0KaW1wb3J0IERldGFpbFNob3BJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxTaG9wSW5mbyI7DQppbXBvcnQgRGV0YWlsR29vZHNJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxHb29kc0luZm8iOw0KaW1wb3J0IERldGFpbFBhcmFtSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsUGFyYW1JbmZvIjsNCmltcG9ydCBHb29kc0xpc3QgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2dvb2RzL0dvb2RzTGlzdCI7DQppbXBvcnQgU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiOw0KaW1wb3J0IHtiYWNrVG9wTWl4aW59IGZyb20gJ2NvbW1vbi9taXhpbicNCmltcG9ydCB7IGdldERldGFpbCwgR29vZHMsIFNob3AsIEdvb2RzUGFyYW0gfSBmcm9tICJuZXR3b3JrL2RldGFpbCI7DQppbXBvcnQgRGV0YWlsQ29tbWVudEluZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbENvbW1lbnRJbmZvIjsNCmltcG9ydCBEZXRhaWxCb3R0b21CYXIgZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbEJvdHRvbUJhci52dWUnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJEZXRhaWwiLA0KICBjb21wb25lbnRzOiB7DQogICAgRGV0YWlsTmF2QmFyLA0KICAgIERldGFpbFN3aXBlciwNCiAgICBEZXRhaWxCYXNlSW5mbywNCiAgICBEZXRhaWxTaG9wSW5mbywNCiAgICBEZXRhaWxHb29kc0luZm8sDQogICAgRGV0YWlsUGFyYW1JbmZvLA0KICAgIFNjcm9sbCwNCiAgICBEZXRhaWxDb21tZW50SW5mbywNCiAgICBHb29kc0xpc3QsDQogICAgRGV0YWlsQm90dG9tQmFyDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRpdGxlczpbJ+WVhuWTgScsJ+WPguaVsCcsJ+ivhOiuuicsJ+aOqOiNkCddLA0KICAgICAgaWlkOiBudWxsLA0KICAgICAgdG9wSW1hZ2VzOiBbXSwNCiAgICAgIGdvb2RzOiB7fSwNCiAgICAgIHNob3A6IHt9LA0KICAgICAgcmF0ZTp7fSwNCiAgICAgIGRldGFpbEluZm86IHt9LA0KICAgICAgcGFyYW1JbmZvOiB7fSwNCiAgICAgIHJlY29tbWVuZGVkOltdLA0KICAgICAgb2Zmc2V0VG9wWTpbXSwNCiAgICAgIGN1cnJlbnRJbmRleDowLA0KICAgICAgaWlkOjANCiAgICB9Ow0KICB9LA0KICBtaXhpbnM6W2JhY2tUb3BNaXhpbl0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy8gMS7kv53lrZjkvKDlhaXnmoRpaWQNCiAgICB0aGlzLmlpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5paWQ7DQoNCiAgICAvLyAyLuagueaNrmlpZOivt+axguivpuaDheaVsOaNrg0KICAgIGdldERldGFpbCh0aGlzLmlpZCkudGhlbigocmVzKSA9PiB7DQogICAgICAvLyAxLuiOt+WPlumhtumDqOeahOWbvueJh+i9ruaSreaVsOaNrg0KICAgICAgY29uc3QgZGF0YSA9IHJlcy5yZXN1bHQ7DQogICAgICB0aGlzLnRvcEltYWdlcyA9IGRhdGEuaXRlbUluZm8udG9wSW1hZ2VzOw0KDQogICAgICAvLyAyLuiOt+WPluWVhuWTgeS/oeaBrw0KICAgICAgdGhpcy5nb29kcyA9IG5ldyBHb29kcygNCiAgICAgICAgZGF0YS5pdGVtSW5mbywNCiAgICAgICAgZGF0YS5jb2x1bW5zLA0KICAgICAgICBkYXRhLnNob3BJbmZvLnNlcnZpY2VzLA0KICAgICAgICB0aGlzLnJhdGUgPSBkYXRhLnJhdGUubGlzdD9kYXRhLnJhdGUubGlzdFswXTp7fQ0KICAgICAgKTsNCg0KICAgICAgLy8gMy7liJvlu7rlupfpk7rkv6Hmga/nmoTlr7nosaENCiAgICAgIHRoaXMuc2hvcCA9IG5ldyBTaG9wKGRhdGEuc2hvcEluZm8pOw0KDQogICAgICAvLyA0LuS/neWtmOWVhuWTgeeahOivpuaDheaVsOaNrg0KICAgICAgdGhpcy5kZXRhaWxJbmZvID0gZGF0YS5kZXRhaWxJbmZvOw0KDQogICAgICAvLyA1LuiOt+WPluWPguaVsOeahOS/oeaBrw0KICAgICAgdGhpcy5wYXJhbUluZm8gPSBuZXcgR29vZHNQYXJhbSgNCiAgICAgICAgZGF0YS5pdGVtUGFyYW1zLmluZm8sDQogICAgICAgIGRhdGEuaXRlbVBhcmFtcy5ydWxlDQogICAgICApOw0KICAgICAgICBnZXRSZWNvbW1lbnRkRGF0YSgpLnRoZW4ocmVzPT57DQogICAgICAgIHRoaXMucmVjb21tZW5kZWQgPSByZXMuZGF0YS5saXN0DQogICAgICB9KQ0KICAgIH0pOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW1hZ2VMb2FkKCkgew0KICAgICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpOw0KICAgICAgdGhpcy5vZmZzZXRUb3BZLnB1c2goMCkNCiAgICAgIHRoaXMub2Zmc2V0VG9wWS5wdXNoKHRoaXMuJHJlZnMuaXRlbVBhcmFtcy4kZWwub2Zmc2V0VG9wKQ0KICAgICAgdGhpcy5vZmZzZXRUb3BZLnB1c2godGhpcy4kcmVmcy5jb21tZW50LiRlbC5vZmZzZXRUb3ApDQogICAgICB0aGlzLm9mZnNldFRvcFkucHVzaCh0aGlzLiRyZWZzLnJlY29tbWVuZC5vZmZzZXRUb3ApDQogICAgICB0aGlzLm9mZnNldFRvcFkucHVzaChOdW1iZXIuTUFYX1ZBTFVFKQ0KICAgIH0sDQogICAgaXRlbUNsaWNrKGluZGV4KXsNCiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKDAsLXRoaXMub2Zmc2V0VG9wWVtpbmRleF0sNTAwKQ0KICAgIH0sDQogICAgc2Nyb2xsUG9zaXRpb24ocG9zaXRpb24pew0KICAgICAgbGV0IHBvc2l0aW9uWT0tcG9zaXRpb24ueQ0KICAgICAgZm9yKGxldCBpID0wO2k8dGhpcy5vZmZzZXRUb3BZLmxlbmd0aC0xO2krKykNCiAgICAgIHsNCiAgICAgICAgaWYodGhpcy5jdXJyZW50SW5kZXhRIT09aSYmKHBvc2l0aW9uWT50aGlzLm9mZnNldFRvcFlbaV0mJnBvc2l0aW9uWTx0aGlzLm9mZnNldFRvcFlbaSsxXSkpDQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleD1pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuJHJlZnMubmF2X2Jhci5jdXJyZW50SW5kZXg9dGhpcy5jdXJyZW50SW5kZXgNCiAgICB9LA0KICAgICAgYWRkQ2FydCgpew0KICAgICAgICBjb25zdCBjYXJ0TGlzdERhdGEgPSB7DQogICAgICAgICAgdGl0bGUgOiB0aGlzLmdvb2RzLnRpdGxlLA0KICAgICAgICAgIGRlc2MgOiB0aGlzLmdvb2RzLmRlc2MsDQogICAgICAgICAgaWlkIDogdGhpcy5paWQsDQogICAgICAgICAgaW1hZ2UgOiB0aGlzLnRvcEltYWdlc1swXSwNCiAgICAgICAgICBwcmljZTp0aGlzLmdvb2RzLmxvd05vd1ByaWNlDQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2FkZENhcnQnLGNhcnRMaXN0RGF0YSkNCiAgICAgIH0NCiAgICB9LA0KICBkZXN0cm95ZWQoKXsNCiAgICB0aGlzLiRidXMuJG9mZignaW1nTG9hZCcsdGhpcy5pbWdMaXN0ZW5lcikNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\r\n  <div id=\"detail\">\r\n    <detail-nav-bar :titles=\"titles\" @itemClick=\"itemClick\" ref=\"nav_bar\" class=\"detail-nav\" />\r\n    <scroll class=\"content\" ref=\"scroll\">\r\n      <detail-swiper :top-images=\"topImages\" />\r\n      <detail-base-info :goods=\"goods\" />\r\n      <detail-shop-info :shop=\"shop\" />\r\n      <detail-goods-info :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\" />\r\n      <detail-param-info :param-info=\"paramInfo\"  ref=\"itemParams\"/>\r\n      <detail-comment-info :rate=\"rate\" ref=\"comment\"></detail-comment-info>\r\n\r\n    </scroll>\r\n    <back-top @click.native=\"scrollTop\" v-show=\"isShopBackTop\"></back-top>\r\n    <detail-bottom-bar @addCart=\"addCart\" ></detail-bottom-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DetailNavBar from \"./childComps/DetailNavBar\";\r\nimport DetailSwiper from \"./childComps/DetailSwiper\";\r\nimport DetailBaseInfo from \"./childComps/DetailBaseInfo\";\r\nimport DetailShopInfo from \"./childComps/DetailShopInfo\";\r\nimport DetailGoodsInfo from \"./childComps/DetailGoodsInfo\";\r\nimport DetailParamInfo from \"./childComps/DetailParamInfo\";\r\nimport GoodsList from \"components/content/goods/GoodsList\";\r\nimport Scroll from \"components/common/scroll/Scroll\";\r\nimport {backTopMixin} from 'common/mixin'\r\nimport { getDetail, Goods, Shop, GoodsParam } from \"network/detail\";\r\nimport DetailCommentInfo from \"./childComps/DetailCommentInfo\";\r\nimport DetailBottomBar from './childComps/DetailBottomBar.vue';\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  components: {\r\n    DetailNavBar,\r\n    DetailSwiper,\r\n    DetailBaseInfo,\r\n    DetailShopInfo,\r\n    DetailGoodsInfo,\r\n    DetailParamInfo,\r\n    Scroll,\r\n    DetailCommentInfo,\r\n    GoodsList,\r\n    DetailBottomBar\r\n  },\r\n  data() {\r\n    return {\r\n      titles:['商品','参数','评论','推荐'],\r\n      iid: null,\r\n      topImages: [],\r\n      goods: {},\r\n      shop: {},\r\n      rate:{},\r\n      detailInfo: {},\r\n      paramInfo: {},\r\n      recommended:[],\r\n      offsetTopY:[],\r\n      currentIndex:0,\r\n      iid:0\r\n    };\r\n  },\r\n  mixins:[backTopMixin],\r\n  created() {\r\n    // 1.保存传入的iid\r\n    this.iid = this.$route.params.iid;\r\n\r\n    // 2.根据iid请求详情数据\r\n    getDetail(this.iid).then((res) => {\r\n      // 1.获取顶部的图片轮播数据\r\n      const data = res.result;\r\n      this.topImages = data.itemInfo.topImages;\r\n\r\n      // 2.获取商品信息\r\n      this.goods = new Goods(\r\n        data.itemInfo,\r\n        data.columns,\r\n        data.shopInfo.services,\r\n        this.rate = data.rate.list?data.rate.list[0]:{}\r\n      );\r\n\r\n      // 3.创建店铺信息的对象\r\n      this.shop = new Shop(data.shopInfo);\r\n\r\n      // 4.保存商品的详情数据\r\n      this.detailInfo = data.detailInfo;\r\n\r\n      // 5.获取参数的信息\r\n      this.paramInfo = new GoodsParam(\r\n        data.itemParams.info,\r\n        data.itemParams.rule\r\n      );\r\n        getRecommentdData().then(res=>{\r\n        this.recommended = res.data.list\r\n      })\r\n    });\r\n  },\r\n  methods: {\r\n    imageLoad() {\r\n      this.$refs.scroll.refresh();\r\n      this.offsetTopY.push(0)\r\n      this.offsetTopY.push(this.$refs.itemParams.$el.offsetTop)\r\n      this.offsetTopY.push(this.$refs.comment.$el.offsetTop)\r\n      this.offsetTopY.push(this.$refs.recommend.offsetTop)\r\n      this.offsetTopY.push(Number.MAX_VALUE)\r\n    },\r\n    itemClick(index){\r\n      this.$refs.scroll.scrollTo(0,-this.offsetTopY[index],500)\r\n    },\r\n    scrollPosition(position){\r\n      let positionY=-position.y\r\n      for(let i =0;i<this.offsetTopY.length-1;i++)\r\n      {\r\n        if(this.currentIndexQ!==i&&(positionY>this.offsetTopY[i]&&positionY<this.offsetTopY[i+1]))\r\n        {\r\n          this.currentIndex=i\r\n        }\r\n      }\r\n      this.$refs.nav_bar.currentIndex=this.currentIndex\r\n    },\r\n      addCart(){\r\n        const cartListData = {\r\n          title : this.goods.title,\r\n          desc : this.goods.desc,\r\n          iid : this.iid,\r\n          image : this.topImages[0],\r\n          price:this.goods.lowNowPrice\r\n        }\r\n        this.$store.dispatch('addCart',cartListData)\r\n      }\r\n    },\r\n  destroyed(){\r\n    this.$bus.$off('imgLoad',this.imgListener)\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#detail {\r\n  position: relative;\r\n  z-index: 9;\r\n  background-color: #fff;\r\n  height: 100vh;\r\n}\r\n\r\n.detail-nav {\r\n  position: relative;\r\n  z-index: 9;\r\n  background-color: #fff;\r\n}\r\n\r\n.content {\r\n  height: calc(100% - 44px);\r\n}\r\n\r\n</style>\r\n"]}]}